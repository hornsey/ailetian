<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾…åŠäº‹é¡¹ç®¡ç† - ä¹å¤© Letian</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        .fade-out {
            animation: fadeOut 0.3s ease-out;
        }
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        @keyframes fadeOut {
            from {
                opacity: 1;
                transform: translateY(0);
            }
            to {
                opacity: 0;
                transform: translateY(-10px);
            }
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-50 to-blue-50">
    <!-- å¤´éƒ¨å¯¼èˆª -->
    <nav class="fixed top-0 w-full bg-white/80 backdrop-blur-md border-b border-slate-200 z-50">
        <div class="max-w-4xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <a href="/" class="text-xl font-bold text-slate-800">ä¹å¤© Letian</a>
                <a href="/" class="text-slate-600 hover:text-slate-900 transition-colors">è¿”å›é¦–é¡µ</a>
            </div>
        </div>
    </nav>

    <!-- ä¸»è¦å†…å®¹ -->
    <main class="pt-24 pb-16">
        <div class="max-w-4xl mx-auto px-6">
            <!-- æ ‡é¢˜å’Œç»Ÿè®¡ -->
            <div class="bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden mb-6">
                <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-8">
                    <h1 class="text-3xl font-bold mb-2">å¾…åŠäº‹é¡¹ç®¡ç†</h1>
                    <p class="text-blue-100">é«˜æ•ˆç®¡ç†ä½ çš„æ—¥å¸¸ä»»åŠ¡</p>
                </div>

                <!-- ç»Ÿè®¡å¡ç‰‡ -->
                <div class="grid grid-cols-3 divide-x divide-slate-200">
                    <div class="p-6 text-center">
                        <div class="text-3xl font-bold text-blue-600" id="totalTasks">0</div>
                        <div class="text-sm text-slate-600 mt-1">æ€»ä»»åŠ¡</div>
                    </div>
                    <div class="p-6 text-center">
                        <div class="text-3xl font-bold text-green-600" id="completedTasks">0</div>
                        <div class="text-sm text-slate-600 mt-1">å·²å®Œæˆ</div>
                    </div>
                    <div class="p-6 text-center">
                        <div class="text-3xl font-bold text-orange-600" id="pendingTasks">0</div>
                        <div class="text-sm text-slate-600 mt-1">å¾…å®Œæˆ</div>
                    </div>
                </div>
            </div>

            <!-- è¾“å…¥å’Œè¿‡æ»¤åŒº -->
            <div class="bg-white rounded-2xl p-6 shadow-lg border border-slate-200 mb-6">
                <div class="flex gap-3 mb-4">
                    <input
                        type="text"
                        id="todoInput"
                        class="flex-1 px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        placeholder="æ·»åŠ æ–°çš„å¾…åŠäº‹é¡¹..."
                        maxlength="100"
                    >
                    <button
                        id="addBtn"
                        class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"
                    >
                        æ·»åŠ 
                    </button>
                </div>

                <!-- è¿‡æ»¤æŒ‰é’® -->
                <div class="flex gap-2 justify-center">
                    <button class="filter-btn px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-blue-600 text-white" data-filter="all">
                        å…¨éƒ¨
                    </button>
                    <button class="filter-btn px-4 py-2 rounded-lg text-sm font-medium transition-colors border border-slate-300 text-slate-600 hover:bg-slate-50" data-filter="pending">
                        å¾…å®Œæˆ
                    </button>
                    <button class="filter-btn px-4 py-2 rounded-lg text-sm font-medium transition-colors border border-slate-300 text-slate-600 hover:bg-slate-50" data-filter="completed">
                        å·²å®Œæˆ
                    </button>
                </div>
            </div>

            <!-- ä»»åŠ¡åˆ—è¡¨ -->
            <div class="bg-white rounded-2xl p-6 shadow-lg border border-slate-200">
                <div id="todoList">
                    <div class="text-center py-12 text-slate-400">
                        <div class="text-6xl mb-4">ğŸ“</div>
                        <h3 class="text-lg font-medium text-slate-600 mb-2">æš‚æ— å¾…åŠäº‹é¡¹</h3>
                        <p class="text-sm">æ·»åŠ ä½ çš„ç¬¬ä¸€ä¸ªä»»åŠ¡å¼€å§‹å§ï¼</p>
                    </div>
                </div>

                <!-- æ¸…é™¤å·²å®ŒæˆæŒ‰é’® -->
                <button
                    id="clearCompleted"
                    class="w-full mt-6 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium hidden"
                >
                    æ¸…é™¤å·²å®Œæˆä»»åŠ¡
                </button>
            </div>
        </div>
    </main>

    <script>
        class TodoApp {
            constructor() {
                this.todos = JSON.parse(localStorage.getItem('todos')) || [];
                this.currentFilter = 'all';
                this.init();
            }

            init() {
                this.bindEvents();
                this.render();
                this.updateStats();
            }

            bindEvents() {
                // æ·»åŠ ä»»åŠ¡
                document.getElementById('addBtn').addEventListener('click', () => this.addTodo());
                document.getElementById('todoInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.addTodo();
                });

                // è¿‡æ»¤å™¨
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => this.setFilter(e.target.dataset.filter));
                });

                // æ¸…é™¤å·²å®Œæˆ
                document.getElementById('clearCompleted').addEventListener('click', () => this.clearCompleted());
            }

            addTodo() {
                const input = document.getElementById('todoInput');
                const text = input.value.trim();

                if (!text) {
                    alert('è¯·è¾“å…¥ä»»åŠ¡å†…å®¹');
                    return;
                }

                const todo = {
                    id: Date.now(),
                    text: text,
                    completed: false,
                    createdAt: new Date().toISOString()
                };

                this.todos.unshift(todo);
                this.saveTodos();
                this.render();
                this.updateStats();

                input.value = '';
                input.focus();
            }

            toggleTodo(id) {
                const todo = this.todos.find(t => t.id === id);
                if (todo) {
                    todo.completed = !todo.completed;
                    this.saveTodos();
                    this.render();
                    this.updateStats();
                }
            }

            deleteTodo(id) {
                const todoElement = document.querySelector(`[data-id="${id}"]`);
                if (todoElement) {
                    todoElement.classList.add('fade-out');
                    setTimeout(() => {
                        this.todos = this.todos.filter(t => t.id !== id);
                        this.saveTodos();
                        this.render();
                        this.updateStats();
                    }, 300);
                }
            }

            setFilter(filter) {
                this.currentFilter = filter;
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.classList.remove('bg-blue-600', 'text-white');
                    btn.classList.add('border', 'border-slate-300', 'text-slate-600', 'hover:bg-slate-50');
                });
                const activeBtn = document.querySelector(`[data-filter="${filter}"]`);
                activeBtn.classList.remove('border', 'border-slate-300', 'text-slate-600', 'hover:bg-slate-50');
                activeBtn.classList.add('bg-blue-600', 'text-white');
                this.render();
            }

            getFilteredTodos() {
                switch (this.currentFilter) {
                    case 'completed':
                        return this.todos.filter(t => t.completed);
                    case 'pending':
                        return this.todos.filter(t => !t.completed);
                    default:
                        return this.todos;
                }
            }

            clearCompleted() {
                if (!confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰å·²å®Œæˆçš„ä»»åŠ¡å—ï¼Ÿ')) return;
                this.todos = this.todos.filter(t => !t.completed);
                this.saveTodos();
                this.render();
                this.updateStats();
            }

            render() {
                const todoList = document.getElementById('todoList');
                const clearBtn = document.getElementById('clearCompleted');
                const filteredTodos = this.getFilteredTodos();

                if (filteredTodos.length === 0) {
                    const emptyMessage = this.todos.length === 0
                        ? { icon: 'ğŸ“', title: 'æš‚æ— å¾…åŠäº‹é¡¹', desc: 'æ·»åŠ ä½ çš„ç¬¬ä¸€ä¸ªä»»åŠ¡å¼€å§‹å§ï¼' }
                        : { icon: 'ğŸ”', title: 'æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„ä»»åŠ¡', desc: 'å°è¯•åˆ‡æ¢åˆ°å…¶ä»–è¿‡æ»¤å™¨' };

                    todoList.innerHTML = `
                        <div class="text-center py-12 text-slate-400">
                            <div class="text-6xl mb-4">${emptyMessage.icon}</div>
                            <h3 class="text-lg font-medium text-slate-600 mb-2">${emptyMessage.title}</h3>
                            <p class="text-sm">${emptyMessage.desc}</p>
                        </div>
                    `;
                } else {
                    todoList.innerHTML = filteredTodos.map(todo => `
                        <div class="flex items-center gap-4 p-4 mb-3 bg-slate-50 rounded-lg border border-slate-200 hover:shadow-md transition-shadow fade-in ${todo.completed ? 'opacity-60' : ''}" data-id="${todo.id}">
                            <input
                                type="checkbox"
                                class="w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500 cursor-pointer"
                                ${todo.completed ? 'checked' : ''}
                                onchange="todoApp.toggleTodo(${todo.id})"
                            >
                            <span class="flex-1 text-slate-700 ${todo.completed ? 'line-through text-slate-400' : ''}">${this.escapeHtml(todo.text)}</span>
                            <button
                                onclick="todoApp.deleteTodo(${todo.id})"
                                class="px-3 py-1 text-sm bg-red-100 text-red-600 rounded hover:bg-red-200 transition-colors"
                            >
                                åˆ é™¤
                            </button>
                        </div>
                    `).join('');
                }

                // æ˜¾ç¤º/éšè—æ¸…é™¤æŒ‰é’®
                const hasCompleted = this.todos.some(t => t.completed);
                clearBtn.classList.toggle('hidden', !hasCompleted);
            }

            updateStats() {
                const total = this.todos.length;
                const completed = this.todos.filter(t => t.completed).length;
                const pending = total - completed;

                document.getElementById('totalTasks').textContent = total;
                document.getElementById('completedTasks').textContent = completed;
                document.getElementById('pendingTasks').textContent = pending;
            }

            saveTodos() {
                localStorage.setItem('todos', JSON.stringify(this.todos));
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
        }

        // åˆå§‹åŒ–åº”ç”¨
        const todoApp = new TodoApp();
    </script>
</body>
</html>
